import { useState, useEffect, useCallback } from 'react';
import type { FAQItem } from '../types';

const LOCAL_STORAGE_KEY = 'faq-app-data';

const initialFaqs: FAQItem[] = [
  {
    id: '1',
    question: '2024년부터 어린이집, 유치원, 초중고교 주변 금연구역 범위는 어떻게 변경되었나요?',
    'answer': '2024년 8월 17일부터 「국민건강증진법」 개정에 따라 어린이집, 유치원, 초중고교 시설 경계선으로부터 30미터 이내 구역이 금연구역으로 확대·신설됩니다.'
  },
  {
    id: '2',
    question: '유치원, 어린이집 주변 금연구역이 10미터에서 30미터로 확대되는 시점은 언제인가요?',
    answer: '해당 개정 사항은 2024년 8월 17일부터 시행됩니다. 그 이전인 2024년 8월 16일까지는 종전 규정(10미터)이 적용됩니다.'
  },
  {
    id: '3',
    question: '학교시설의 경계선으로부터 30미터 이내 금연구역은 2022년에도 있었나요?',
    answer: '2022년에는 유치원 및 어린이집 시설 경계선으로부터 10미터 이내 구역만 금연구역으로 지정되어 있었습니다. 초중고교 시설 경계선으로부터 30미터 이내 금연구역은 2024년 8월 17일부터 신설됩니다.'
  },
  {
    id: '4',
    question: '어린이놀이시설의 금연구역 범위는 어디까지인가요?',
    answer: '2024년 지침에 따르면 <어린이 놀이시설 경계선까지>가 금연구역입니다. 2022년에는 <부지를 포함한 모든 구역>이었습니다.'
  },
  {
    id: '5',
    question: '공동주택 및 복합건물 내 어린이집/유치원이 해당 층 전체 면적을 사용하는 경우, 실외 금연구역 범위는 어떻게 되나요?',
    answer: '해당 건물 전체 외벽 경계선으로부터 사방 30미터 이내로 지정됩니다.'
  },
  {
    id: '6',
    question: '건물 1층에 어린이집/유치원이 부분 면적을 사용하는 경우, 실외 금연구역 범위는 어떻게 되나요?',
    answer: '사용 면적(사용 호실) 중 건물 외벽과 맞닿아 있는 면의 경계선으로부터 30미터 이내와 영유아보육법에 의한 주출입구 및 안전한 외부 지상과 연결이 가능한 출구(비상구 등)로부터 30미터 이내로 지정됩니다.'
  },
  {
    id: '7',
    question: '2층 이상 건물에 어린이집/유치원이 부분 면적을 사용하는 경우, 실외 금연구역 범위는 어떻게 되나요?',
    answer: '사용 면적(사용호실) 중 건물 외벽과 맞닿아 있는 면의 경계선으로부터 30미터 이내와 영유아보육법에 의한 주출입구 및 안전한 외부 지상과 연결이 가능한 출구(비상구 등)로부터 30미터 이내로 지정됩니다. 다만, 계단식 아파트와 같이 해당 층 사용 부분과 주출입구를 달리하고 내부 벽면이 완벽히 차단된 경우에는 사용호 주출입구 이용범위로 한정됩니다.'
  },
  {
    id: '8',
    question: '시설 경계선으로부터 30미터 금연구역 범위를 어떻게 확인할 수 있나요?',
    answer: '교육환경정보시스템(https://eeis.schoolkeepa.or.kr)의 <지리정보서비스>를 통해 확인할 수 있으며, 반경 30m를 설정하여 포함되는 주소 목록을 분석할 수 있습니다.'
  },
  {
    id: '9',
    question: '지자체 조례로 이미 학교 주변 50미터를 금연구역으로 지정한 경우, 법 개정 후 적용은 어떻게 되나요?',
    answer: '시설 경계선으로부터 30미터 이내 범위에서는 「국민건강증진법」이 우선적으로 적용되어 흡연 과태료 10만원이 부과됩니다. 30미터 이상 50미터까지의 공간에서는 조례에 따라 금연구역이 유지되며, 이 구역에서의 흡연 과태료는 조례에 따릅니다.'
  },
  {
    id: '10',
    question: '하나의 영업점이 두 가지 이상의 용도로 등록되어 금연구역 시설과 비금연구역 시설이 함께 영업하는 경우 금연구역 범위는 어떻게 되나요?',
    answer: '「국민건강증진법」에 따라 금연구역으로 지정되어야 하는 시설이 혼재하여 있더라도, 해당 시설 전체를 금연구역으로 지정해야 합니다.'
  },
  {
    id: '11',
    question: '편의점 통행로 앞 테이블 등 영업시설도 금연구역으로 지정될 수 있나요?',
    answer: '편의점이 법제9조제4항제24호에 해당하는 경우, 점포 밖 통행로의 테이블 등이 실질적으로 영업공간으로 활용되면 금연구역에 포함됩니다.'
  },
  {
    id: '12',
    question: '성큰가든(지하 개방형 휴식 공간)은 금연구역에 해당하나요?',
    answer: '「국민건강증진법」제9조제4항제18호에 따라 대규모점포, 지하도에 있는 상점가에 성큰가든이 속하는 경우 시설 전체를 금연구역으로 지정하는 것이 타당합니다.'
  },
  {
    id: '13',
    question: '전통시장, 농수산물 도매시장은 법정 금연구역인가요?',
    answer: '「유통산업발전법」에 따라 대규모 점포로 등록된 전통시장은 금연구역입니다. 그러나 「전통시장 및 상점가 육성법」에 따른 시장은 법적 금연구역이 아니며(조례로 지정 가능), 농수산물 도매시장도 법정 금연구역은 아니지만 연면적 1,000㎡ 이상의 복합용도 건축물일 경우 금연구역으로 지정됩니다.'
  },
  {
    id: '14',
    question: '지자체에서 운영하는 공영주차장도 금연구역인가요?',
    answer: '사무실 등이 혼재되어 있지 않은 주차장 단독 시설은 금연구역으로 보기 어렵습니다. 다만, 지자체 또는 공공기관의 부속시설인 경우 청사시설의 일부로 보아 금연구역에 해당합니다. 대규모점포에 속한 주차장도 금연구역입니다.'
  },
  {
    id: '15',
    question: '대규모점포 사이의 연결지상 통로도 금연구역에 포함되나요?',
    answer: '네, 대규모점포에서 건물과 건물 사이의 연결지상 통로는 대규모점포의 일부로서 법 제9조제4항제18호에 따라 금연구역 지정 대상이 됩니다.'
  },
  {
    id: '16',
    question: '모든 실내 체육시설이 금연구역으로 지정되나요?',
    answer: '「체육시설 설치 이용에 관한 법률」 제10조에 따른 등록·신고업으로 규정된 업종에 대해서만 실내 체육시설이 금연구역으로 적용됩니다.'
  },
  {
    id: '17',
    question: '음식점의 영업신고면적 외 테라스나 베란다도 금연구역으로 지정될 수 있나요?',
    answer: '네, 금연구역 지정은 영업신고 면적과 관계없이 실질적으로 영업장소로 활용되는 공중이 이용하는 시설 전체에 적용됩니다. 영업장소로 활용된다면 금연구역으로 지정해야 합니다.'
  },
  {
    id: '18',
    question: '연면적 1,000㎡ 이상의 복합용도 건축물 내 차양막이나 비가림막 아래도 금연구역인가요?',
    answer: '차양막(캐노피·비가림막·어닝 등)의 하부는 건축물로 보기 어려워 금연구역에 포함되지 않습니다.'
  },
  {
    id: '19',
    question: '주거공간과 근린생활시설이 혼재된 1,000㎡ 이상 복합용도 건축물의 금연구역 지정 기준은 무엇인가요?',
    answer: '「국민건강증진법」 제9조제4항제16호에 따라 연면적 1,000㎡ 이상의 복합용도 건축물은 금연구역으로 지정되지만, 주거용으로 사용되는 사적 공간은 법률 적용에서 제외됩니다.'
  },
  {
    id: '20',
    question: '공동주택과 오피스텔 등이 혼재되어 있는 복합용도 건축물의 금연구역은 어떻게 지정되나요?',
    answer: '복도의 경우 공동주택 층은 세대주 동의를 거쳐 지정하며, 비공동주택 층은 전체 금연구역입니다. 계단, 엘리베이터, 지하주차장은 물리적으로 분리된 경우 공동주택은 동의를 거쳐 지정하고, 분리되지 않은 경우 전체 금연구역입니다.'
  },
  {
    id: '21',
    question: '공동주택 금연구역 지정 시 <거주세대 2분의 1 이상 동의>의 기준은 무엇인가요?',
    answer: '공동주택에 거주하는 세대의 세대주 2분의 1 이상이 동의하는 것을 의미합니다.'
  },
  {
    id: '22',
    question: '대학교 캠퍼스 내 도로도 금연구역에 포함되나요?',
    answer: '대학교는 캠퍼스 내 모든 교사시설(건물 등)을 금연구역으로 지정해야 하지만, 캠퍼스 내 도로는 제외됩니다.'
  },
  {
    id: '23',
    question: '대학교 기숙사도 금연구역에 해당하나요?',
    answer: '네, 대학교의 기숙사도 교사시설 중 지원시설에 해당하여 금연구역으로 지정해야 합니다.'
  },
  {
    id: '24',
    question: '병원 시설 내 장례식장도 금연구역에 포함되나요?',
    answer: '네, 병원 시설(울타리) 내의 연구시설, 장례식장 등도 모두 금연시설에 포함되며, 이러한 시설에는 건물 내 흡연실을 설치할 수 없습니다.'
  },
  {
    id: '25',
    question: '정신병원의 폐쇄병동도 금연구역으로 지정되나요?',
    answer: '네, 정신병원의 경우에도 개정된 법에 예외 규정을 두고 있지 않으므로 전체 금연구역이며, 정신질환자가 입원하고 있는 폐쇄병동 역시 직원 및 관계자, 기타 비흡연자들이 근무하는 곳으로 당연히 흡연이 금지됩니다.'
  },
  {
    id: '26',
    question: '도서관은 부지 전체가 금연구역인가요? 흡연실 설치가 가능한가요?',
    answer: '「도서관법」에 따른 도서관은 부지를 포함한 모든 구역을 금연구역으로 지정해야 합니다. 다만, 건물 옥상이나 각 시설의 출입구로부터 10m 이상의 거리에 흡연실을 설치할 수 있습니다.'
  },
  {
    id: '27',
    question: '고속도로 휴게소 주차장은 금연구역인가요?',
    answer: '고속도로 휴게소의 주차장은 금연구역이 아닙니다.'
  },
  {
    id: '28',
    question: '베란다, 테라스, 옥상은 금연구역에 포함되나요?',
    answer: '베란다, 테라스, 옥상은 실외와 연결되어 있더라도 <공중이용시설> 건축물의 부속물에 해당되어 금연구역입니다. 베란다, 테라스는 흡연실로 사용할 수 없지만, 옥상의 경우 옥외 흡연실을 설치할 수 있습니다. 다만, 지자체장의 판단에 따라 베란다, 테라스에도 흡연실 설치가 가능할 수 있습니다.'
  },
  {
    id: '29',
    question: '공동주택 내 개인 거주 공간(베란다, 화장실 등)도 금연구역 지정 범위에 포함되나요?',
    answer: '공동주택 내 금연구역 지정 범위는 공용공간으로 제한되며, 베란다, 화장실 등 개인 거주 공간은 포함되지 않습니다.'
  },
  {
    id: '30',
    question: '금연구역 내 개별 법령에서 제외 규정된 시설이 복합용도 건축물 내에 있는 경우 금연구역 적용은 어떻게 되나요? (예: 1,000㎡ 이상 복합용도 건축물 내 유흥주점)',
    answer: '1,000㎡ 이상 복합용도 건축물은 시설 전체가 금연구역이므로 유흥주점, 단란주점 등 개별 법령에서 제외 규정된 시설이더라도 1,000㎡ 이상 복합용도 건축물에 있는 경우 금연구역에 포함됩니다.'
  },
    {
    id: '31',
    question: '흡연실 설치 시 어린이·청소년 이용시설 및 의료기관 등에서는 실내 설치가 가능한가요?',
    answer: '해당 시설들은 실내 흡연실 설치를 할 수 없으며, 옥상이나 각 시설의 출입구로부터 10미터 이상의 거리(건물과 시설 경계 사이 실외 공간 포함)에만 설치 가능합니다.'
  },
  {
    id: '32',
    question: '국회, 정부·지방자치단체, 공공기관 청사 내 흡연실은 어디에 설치해야 하나요?',
    'answer': '해당 시설들은 건물뿐만 아니라 대지 전체가 금연구역이므로, 건물과 시설 경계 사이의 실외 공간에 설치를 권장하며, 이 경우에도 건물 출입구로부터 10미터 이상 떨어진 거리에 설치해야 합니다.'
  },
  {
    id: '33',
    question: '흡연실(흡연부스) 내부에 자판기 등 영업시설을 설치할 수 있나요?',
    answer: '흡연실은 흡연을 위한 장소로만 사용되어야 하며, 자판기, 탁자, 음료 자판기 등 영업에 사용되는 시설 또는 설비를 설치해서는 안 됩니다.'
  },
  {
    id: '34',
    question: '실내 흡연실(흡연부스) 제작 시 실외로 연결된 환풍시설을 반드시 설치해야 하나요?',
    answer: '국민건강증진법 시행규칙 별표2의 다항 3호에 따라 흡연실의 연기를 실외로 배출할 수 있도록 환기시설을 설치해야 합니다.'
  },
  {
    id: '35',
    question: '흡연실(흡연부스) 내/외부에 담배회사 로고를 표시할 수 있나요?',
    answer: '담배회사 또는 담배업계와 관련된 로고나 회사 명칭 등을 흡연실 내·외부에 표기해서는 안 됩니다. 이는 옥외광고물법 및 국민건강증진법을 위반하는 <담배에 관한 광고>로 간주될 수 있습니다.'
  },
  {
    id: '36',
    question: '실외 흡연실 설치 시 지붕 및 차단막 설치 기준이 있나요?',
    answer: '실외 흡연구역은 담배 배출물이 자연 환기되도록 개방형으로 지정하는 것이 원칙입니다. 필요한 경우 보행자의 간접흡연 피해를 최소화할 수 있도록 지붕 및 차단막을 설치할 수 있으나, 흡연가능구역 내 시설을 설치할 경우 벽면 4면 면적의 50% 이하로 설치해야 하며, 지붕 설치 시 지붕 면적의 50% 이하로 설치해야 합니다.'
  },
  {
    id: '37',
    question: '금연구역 내 흡연 시 과태료 감면을 받을 수 있는 조건은 무엇인가요?',
    answer: '과태료 납부 대상자가 대통령령으로 정하는 바에 따라 일정 교육(3시간 이상) 또는 금연지원 서비스(3개월 이상 이용)를 받은 경우 시·도지사 또는 시장·군수·구청장이 과태료를 감면할 수 있습니다. 금연교육 이수 시 50% 감경, 금연지원 서비스 이수 시 전액 면제됩니다.'
  },
  {
    id: '38',
    question: '금연교육 또는 금연지원 서비스를 통해 과태료를 감면받으려면 언제까지 신청해야 하나요?',
    answer: '과태료 납부 대상자는 해당 과태료에 대한 의견 제출 기한까지 교육 및 금연지원 서비스 신청서를 시·도지사 또는 시장·군수·구청장에게 제출해야 합니다.'
  },
  {
    id: '39',
    question: '금연지도원이 단독으로 금연구역 위반(흡연자) 확인서를 수령할 수 있나요?',
    answer: '<단독 직무수행 승인서>를 승인받은 경우, 금연지도원 단독으로 <금연구역 위반(흡연자)> 확인서를 수령할 수 있습니다.'
  },
  {
    id: '40',
    question: '금연지도원이 단독으로 금연구역 지정의무 위반 등에 대한 시정명령 확인서를 수령할 수 있나요?',
    answer: '<단독 직무수행 승인서>를 승인받은 경우, 금연지도원 단독으로 위반시설 대상 <금연구역 지정의무 위반 등(시정명령)> 확인서를 수령할 수 있습니다.'
  },
  {
    id: '41',
    question: '전자담배 흡연 시 과태료 부과가 가능한가요?',
    answer: '담배사업법상 담배에 해당하는 전자담배의 경우 금연구역에서 흡연 시 과태료 처분 가능합니다. 다만, 의약품 및 의약외품으로 분류된 금연보조제일 경우 과태료 부과는 불가합니다.'
  },
  {
    id: '42',
    question: '금연구역 내에서 불이 붙지 않은 담배를 물고만 있는 경우에도 적발되나요?',
    answer: '담배를 소지하고 불을 붙인 경우 과태료 부과 가능하나, 불이 붙지 않은 담배를 물고만 있는 경우는 과태료 부과가 어렵습니다.'
  },
  {
    id: '43',
    question: '금연구역 내에서 전자담배 적발 기준은 무엇인가요?',
    answer: '전원을 작동하여 액상을 기화시키거나(액상형), 담배를 가열함으로써 증기가 공중으로 배출되는 시점(궐련형)에 과태료 부과가 가능합니다.'
  },
  {
    id: '44',
    question: '금연표지가 없는 경우에도 금연구역 내 흡연자에게 과태료를 부과할 수 있나요?',
    answer: '지도 점검을 통해 금연구역 지정 여부를 주기적으로 조사해야 하며, 흡연 과태료 부과 여부는 현장 상황을 종합적으로 고려하여 자체적으로 판단합니다.'
  },
  {
    id: '45',
    question: '흡연 관련 물품(재떨이 등)이 비치되어 있는 경우 과태료 부과가 가능한가요?',
    answer: '흡연 관련 물품이 비치되어 있다는 이유만으로는 과태료 부과가 어렵습니다. 그러나 계도 후에도 반복 지적되는 경우 관리자의 의지 등을 종합적으로 판단하여 과태료 부과가 가능합니다.'
  },
  {
    id: '46',
    question: '필로티 구조의 건축물에서 흡연 시 과태료 부과가 가능한가요?',
    answer: '필로티 구조 또한 시설의 일부로 보아 금연구역으로 지정하는 것이 타당하므로 흡연 시 과태료 부과가 가능합니다. 다만, 옥상 및 필로티 구조에도 흡연실 설치는 가능합니다.'
  },
  {
    id: '47',
    question: '과태료 사전통지서에 대한 의견을 제출한 경우에도 자진납부 감경이 가능한가요?',
    answer: '네, 사전통지 내용에 대해 의견을 제출한 경우에도 의견 제출 기한 이내에 납부를 완료했다면 과태료를 감경할 수 있습니다.'
  },
  {
    id: '48',
    question: '국민기초생활수급자, 장애인 등 사회적 약자가 자진납부 시 추가 감경을 받을 수 있나요?',
    answer: '「질서위반행위규제법 시행령」 제2조의2제2항에 따라 사회적 약자 감경과 자진납부 감경은 중복하여 가능합니다.'
  },
  {
    id: '49',
    question: '금연 지도 단속 과정에서 개인정보보호법을 이유로 사진 촬영을 거부할 경우 촬영이 가능한가요?',
    answer: '「개인정보보호법」 제15조제1항제3호에 따라 공공기관이 법령 등에서 정하는 소관 업무 수행을 목적으로 개인정보를 수집·이용할 수 있으므로 촬영 가능합니다.'
  },
  {
    id: '50',
    question: '금연 지도 단속 과정에서 허위 신분증을 제공하는 경우 어떻게 조치되나요?',
    answer: '「주민등록법」 제37조제10호에 따라 3년 이하의 징역 또는 3천만 원 이하의 벌금에 해당할 수 있음을 고지합니다.'
  },
  {
    id: '51',
    question: '기간제 근로자나 타 업무 공무원을 금연지도원으로 위촉할 수 있나요?',
    answer: '시장·군수·구청장이 금연지도원으로 위촉 가능하며, 수당 지급 여부는 해당 지자체 보수 규정에 따릅니다.'
  },
  {
    id: '52',
    question: '금연지도원 위촉 시 공모 및 심사절차가 의무화되어 있나요?',
    answer: '네, 공모를 통해 추천 또는 지원을 받고 심사위원회를 구성하여 관련 경력 등을 심사하는 절차가 의무화되어 있습니다. 다만, 자원봉사자 등 수당이 없는 형태로 근무하는 금연지도원의 경우 공모 및 심사절차는 제외됩니다.'
  },
  {
    id: '53',
    question: '금연서비스 통합정보시스템에 금연구역 지도·단속 실적을 언제까지 보고해야 하나요?',
    answer: '지방자치단체는 금연구역 지도·단속 실적을 「금연서비스 통합정보시스템」에 익월 10일까지 입력·보고해야 합니다. 매년 1월 15일, 7월 15일은 상·하반기 실적을 종합하여 입력합니다.'
  },
  {
    id: '54',
    question: '경찰이나 선생님이 확인한 흡연 행위를 보건소로 이첩하는 경우에도 과태료 부과가 가능한가요?',
    answer: '흡연 위반에 대한 사실확인을 거쳐 이첩하는 경우, 위반자에 대한 사실관계 재확인 및 의견 청취를 거쳐 과태료 부과가 가능합니다.'
  }
  
];

export const useFaqManager = () => {
  const [faqs, setFaqs] = useState<FAQItem[]>([]);

  useEffect(() => {
    try {
      const storedFaqs = localStorage.getItem(LOCAL_STORAGE_KEY);
      if (storedFaqs) {
        setFaqs(JSON.parse(storedFaqs));
      } else {
        setFaqs(initialFaqs);
      }
    } catch (error) {
      console.error('로컬 스토리지에서 FAQ를 로드하는 데 실패했습니다:', error);
      setFaqs(initialFaqs);
    }
  }, []);

  useEffect(() => {
    try {
      localStorage.setItem(LOCAL_STORAGE_KEY, JSON.stringify(faqs));
    } catch (error) {
      console.error('로컬 스토리지에 FAQ를 저장하는 데 실패했습니다:', error);
    }
  }, [faqs]);

  const addFaq = useCallback((newFaq: Omit<FAQItem, 'id'>) => {
    setFaqs(prevFaqs => [...prevFaqs, { ...newFaq, id: crypto.randomUUID() }]);
  }, []);

  const updateFaq = useCallback((updatedFaq: FAQItem) => {
    setFaqs(prevFaqs =>
      prevFaqs.map(faq => (faq.id === updatedFaq.id ? updatedFaq : faq))
    );
  }, []);

  const deleteFaq = useCallback((id: string) => {
    setFaqs(prevFaqs => prevFaqs.filter(faq => faq.id !== id));
  }, []);

  const replaceAllFaqs = useCallback((newFaqs: Omit<FAQItem, 'id'>[]) => {
    const faqsWithIds = newFaqs.map(faq => ({ ...faq, id: crypto.randomUUID() }));
    setFaqs(faqsWithIds);
  }, []);

  return { faqs, addFaq, updateFaq, deleteFaq, replaceAllFaqs };
};
